<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/src/main/java/org/example/frontend/Control/medicamentoController.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/org/example/frontend/Control/medicamentoController.java" />
              <option name="originalContent" value="package org.example.frontend.Control;&#10;&#10;import org.example.common.Medicamento;&#10;import org.example.backend.dao.MedicamentoDao;&#10;import org.example.frontend.View.medicamentoView;&#10;&#10;import java.awt.event.ActionEvent;&#10;import java.awt.event.ActionListener;&#10;import java.util.List;&#10;import javax.swing.SwingUtilities;&#10;&#10;public class medicamentoController {&#10;    private medicamentoView view;&#10;    private MedicamentoDao dao;&#10;&#10;    public medicamentoController(medicamentoView view, MedicamentoDao dao) {&#10;        this.view = view;&#10;        this.dao = dao;&#10;        cargarMedicamentosAsync();&#10;        view.addListener(new ButtonListener());&#10;    }&#10;&#10;    public medicamentoView getView() {&#10;        return view;&#10;    }&#10;&#10;&#10;    private void cargarMedicamentosAsync() {&#10;        Thread thread = new Thread(() -&gt; {&#10;            List&lt;Medicamento&gt; medicamentos = dao.loadMedicamentos().getMedicamentos();&#10;            SwingUtilities.invokeLater(() -&gt; {&#10;                for (Medicamento m : medicamentos) {&#10;                    Object[] row = { m.getCodigo(), m.getNombre(), m.getPresentacion() };&#10;                    view.modelAddRow(row);&#10;                }&#10;            });&#10;        });&#10;        thread.start();&#10;    }&#10;&#10;&#10;    private class ButtonListener implements ActionListener {&#10;        @Override&#10;        public void actionPerformed(ActionEvent e) {&#10;&#10;            // Guardar medicamento&#10;            if (e.getSource().equals(view.getGuardarButton())) {&#10;                String codigo = view.getCampoCodigo();&#10;                String nombre = view.getCampoNombre();&#10;                String presentacion = view.getCampoPresentacion();&#10;&#10;                if (codigo.isEmpty() || nombre.isEmpty() || presentacion.isEmpty()) {&#10;                    view.mostrarError(&quot;Debe llenar todos los campos&quot;);&#10;                    return;&#10;                }&#10;&#10;                // Crear y guardar medicamento&#10;                Medicamento medicamento = new Medicamento(codigo, nombre, presentacion);&#10;                dao.addMedicamento(medicamento);&#10;&#10;                // Agregar a la tabla&#10;                Object[] row = { codigo, nombre, presentacion };&#10;                view.modelAddRow(row);&#10;                view.clearAllText();&#10;            }&#10;&#10;            // Borrar medicamento&#10;            else if (e.getSource().equals(view.getBorrarButton())) {&#10;                int i = view.tableGetSelectedRow();&#10;                if (i &gt;= 0) {&#10;                    String codigo = (String) view.getTablaMedicamentos().getValueAt(i, 0);&#10;&#10;                    boolean removed = dao.removeMedicamentoByCodigo(codigo);&#10;                    if (removed) {&#10;                        view.tableRemoveRow(i);&#10;                    } else {&#10;                        view.mostrarError(&quot;No se pudo eliminar el medicamento con código: &quot; + codigo);&#10;                    }&#10;                } else {&#10;                    view.mostrarError(&quot;Seleccione un medicamento en la tabla&quot;);&#10;                }&#10;            }&#10;&#10;            // Buscar medicamento por código o nombre&#10;            else if (e.getSource().equals(view.getBuscarButton())) {&#10;                String busqueda = view.getCampoBusq().getText();&#10;                view.clearTable();&#10;&#10;                if (busqueda.isEmpty()) {&#10;                    cargarMedicamentosAsync();&#10;                } else {&#10;                    Thread thread = new Thread(() -&gt; {&#10;                        // buscar por código&#10;                        dao.findByCodigo(busqueda).ifPresent(m -&gt; {&#10;                            SwingUtilities.invokeLater(() -&gt; {&#10;                                Object[] row = { m.getCodigo(), m.getNombre(), m.getPresentacion() };&#10;                                view.modelAddRow(row);&#10;                            });&#10;                        });&#10;                        // Buscar por nombre&#10;                        List&lt;Medicamento&gt; encontrados = dao.search(busqueda);&#10;                        SwingUtilities.invokeLater(() -&gt; {&#10;                            for (Medicamento m : encontrados) {&#10;                                Object[] row = { m.getCodigo(), m.getNombre(), m.getPresentacion() };&#10;                                view.modelAddRow(row);&#10;                            }&#10;                        });&#10;                    });&#10;                    thread.start();&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package org.example.frontend.Control;&#10;&#10;import org.example.common.Medicamento;&#10;import org.example.backend.dao.MedicamentoDao;&#10;import org.example.frontend.View.medicamentoView;&#10;&#10;import java.awt.event.ActionEvent;&#10;import java.awt.event.ActionListener;&#10;import java.util.List;&#10;import javax.swing.SwingUtilities;&#10;&#10;public class medicamentoController {&#10;    private medicamentoView view;&#10;    private MedicamentoDao dao;&#10;&#10;    public medicamentoController(medicamentoView view, MedicamentoDao dao) {&#10;        this.view = view;&#10;        this.dao = dao;&#10;        cargarMedicamentosAsync();&#10;        view.addListener(new ButtonListener());&#10;    }&#10;&#10;    public medicamentoView getView() {&#10;        return view;&#10;    }&#10;&#10;&#10;    private void cargarMedicamentosAsync() {&#10;        Thread thread = new Thread(() -&gt; {&#10;            List&lt;Medicamento&gt; medicamentos = dao.loadMedicamentos().getMedicamentos();&#10;            SwingUtilities.invokeLater(() -&gt; {&#10;                for (Medicamento m : medicamentos) {&#10;                    Object[] row = { m.getCodigo(), m.getNombre(), m.getPresentacion() };&#10;                    view.modelAddRow(row);&#10;                }&#10;            });&#10;        });&#10;        thread.start();&#10;    }&#10;&#10;&#10;    private class ButtonListener implements ActionListener {&#10;        @Override&#10;        public void actionPerformed(ActionEvent e) {&#10;&#10;            // Guardar medicamento&#10;            if (e.getSource().equals(view.getGuardarButton())) {&#10;                String codigo = view.getCampoCodigo();&#10;                String nombre = view.getCampoNombre();&#10;                String presentacion = view.getCampoPresentacion();&#10;&#10;                if (codigo.isEmpty() || nombre.isEmpty() || presentacion.isEmpty()) {&#10;                    view.mostrarError(&quot;Debe llenar todos los campos&quot;);&#10;                    return;&#10;                }&#10;&#10;                // Crear y guardar medicamento&#10;                Medicamento medicamento = new Medicamento(codigo, nombre, presentacion);&#10;                dao.addMedicamento(medicamento);&#10;&#10;                // Agregar a la tabla&#10;                Object[] row = { codigo, nombre, presentacion };&#10;                view.modelAddRow(row);&#10;                view.clearAllText();&#10;            }&#10;&#10;            // Borrar medicamento&#10;            else if (e.getSource().equals(view.getBorrarButton())) {&#10;                int i = view.tableGetSelectedRow();&#10;                if (i &gt;= 0) {&#10;                    String codigo = (String) view.getTablaMedicamentos().getValueAt(i, 0);&#10;&#10;                    boolean removed = dao.removeMedicamentoByCodigo(codigo);&#10;                    if (removed) {&#10;                        view.tableRemoveRow(i);&#10;                    } else {&#10;                        view.mostrarError(&quot;No se pudo eliminar el medicamento con código: &quot; + codigo);&#10;                    }&#10;                } else {&#10;                    view.mostrarError(&quot;Seleccione un medicamento en la tabla&quot;);&#10;                }&#10;            }&#10;&#10;            // Buscar medicamento por código o nombre&#10;            else if (e.getSource().equals(view.getBuscarButton())) {&#10;                String busqueda = view.getCampoBusq().getText();&#10;                view.clearTable();&#10;&#10;                if (busqueda.isEmpty()) {&#10;                    cargarMedicamentosAsync();&#10;                } else {&#10;                    Thread thread = new Thread(() -&gt; {&#10;                        // buscar por código&#10;                        dao.findByCodigo(busqueda).ifPresent(m -&gt; {&#10;                            SwingUtilities.invokeLater(() -&gt; {&#10;                                Object[] row = { m.getCodigo(), m.getNombre(), m.getPresentacion() };&#10;                                view.modelAddRow(row);&#10;                            });&#10;                        });&#10;                        // Buscar por nombre&#10;                        List&lt;Medicamento&gt; encontrados = dao.search(busqueda);&#10;                        SwingUtilities.invokeLater(() -&gt; {&#10;                            for (Medicamento m : encontrados) {&#10;                                Object[] row = { m.getCodigo(), m.getNombre(), m.getPresentacion() };&#10;                                view.modelAddRow(row);&#10;                            }&#10;                        });&#10;                    });&#10;                    thread.start();&#10;                }&#10;            }&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>